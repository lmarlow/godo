heuristics:
  rails: |
    File.exists?( File.join( project_path, "config", "environment.rb" ) ) &&
    File.exists?( File.join( project_path, "config", "environments", "development.rb" ) ) &&
    File.exists?( File.join( project_path, "config", "environments", "test.rb" ) )
  rspec: |
    File.exists?( File.join( project_path, "spec" ) )
  svn: |
    !`svn info #{project_path}`.split(%r{\n}).grep( /Repository Root:/ ).empty?
  git: |
    File.exists?( File.join( project_path, ".git" ) )
  true: |
    true

actions:
  mongrel:
    label: mongrel
    command: mongrel_rails start
  devlog:
    label: dev-log
    command: tail -f log/development.log
  reqlog:
    label: req-log
    command: tail -f log/request.log
  autotest-unit:
    label: tests
    command: autotest
  console:
    label: console
    command: ruby script/console
  irb:
    label: IRB
    command: irb
  diffly:
    command: diffly .; exit
  browser:
    command: open -a BonEcho http://localhost:3000/; exit
  terminal:
    label: Con-#{counter(:terminal)}
  textmate:
    command: mate .; exit

ignores:
  - \.svn
  - \.git
  - CVS
  - app
  - lib
  - vendor
  - config
  - db
  - log
  - public
  - script
  - test
  - spec
  - tmp
  - doc
  - components
  - rdoc
  - generators
  - data
  - man
  - build
  - backup
  - bin
  - include
  - .*\.lproj
  - .*\.xcodeproj
  - .*\.wdgtproj
  - .*\.app
  
matchers:
  -
    name: rails+spec+svn
    heuristics:
      - rspec
      - rails
      - svn
    actions:
      - mongrel
      - devlog
      - reqlog
      - autotest-spec
      - console
      - irb
      - terminal
      - terminal
      - diffly
      - browser
      - textmate
  -
    name: rails+spec+git
    heuristics:
      - rails
      - rspec
      - git
    actions:
      - mongrel
      - devlog
      - reqlog
      - autotest-spec
      - console
      - irb
      - terminal
      - terminal
      - view-git
      - browser
      - textmate
  -
    name: rails+svn
    heuristics:
      - rails
      - svn
    actions:
      - mongrel
      - devlog
      - reqlog
      - autotest-unit
      - console
      - irb
      - terminal
      - terminal
      - diffly
      - browser
      - textmate
  -
    name: rails+git
    heuristics:
      - rails
      - git
    actions:
      - mongrel
      - devlog
      - reqlog
      - autotest-unit
      - console
      - irb
      - terminal
      - terminal
      - view-git
      - browser
      - textmate
  -
    name: default
    heuristics:
      - true
    actions:
      - terminal

projects:
  - ~/Projects/ruby
  - ~/Projects/rails
  - ~/Projects/Cocoa

sessions: ITerm
