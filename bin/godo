#!/usr/bin/env ruby -ws

require 'rubygems'
require 'trollop'
require 'godo'

opts = Trollop::options do
  opt :install, "Create a fresh ~/.godo configuration file"
  opt :kind, "Override heuristics to specify project type", :short => 'k'
end

if opts[:install]
  begin
    Godo.install_config
    puts "Installed configuration file ~/.godo, please customise"
  rescue => e
    puts e.message
    exit 1
  end
else
  begin
    Godo.invoke( ARGV.shift, opts )
  rescue => e
    puts e.message
    exit 1
  else
    exit 0
  end
end
